"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("vue-click-outside"),o=require("../BaseIcon/BaseIcon.vue.cjs.js"),p=require("../../utils/utils.cjs.js"),h=require("../../mixins/i18n.cjs.js");require("./BaseInput.vue.cjs2.js");const c=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),m={name:"BaseInput",directives:{ClickOutside:d},components:{BaseIcon:o.default,BaseLoader:()=>Promise.resolve().then(()=>require("../BaseLoader/BaseLoader.vue.cjs.js")).then(t=>t.default||t)},mixins:[h.default],model:{prop:"input",event:"input"},props:{input:{type:[String,Number],default:""},label:{type:String,required:!0},showLabel:{type:Boolean,default:!0},id:{type:String,default:""},placeholder:{type:String,default:"Enter Text Here"},required:{type:Boolean,default:!1},invalid:{type:Boolean,default:!1},errorMessage:{type:String,default:""},showErrorIcon:{type:Boolean,default:!0},fieldType:{type:String,default:"text",validator:t=>["text","number","password","email","url","search"].includes(t)},dropDownListId:{type:String,default:""},linkedListOption:{type:[Number,String],default:null},hideInputField:{type:Boolean,default:!1},isActive:{type:Boolean,default:null},showInputBorder:{type:Boolean,default:!0},useFormFieldStyling:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},loadable:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},useFadeOut:{type:Boolean,default:!0},inputClass:{type:String,default:""},language:{type:String,default:"",validator:t=>!t||t.length===2},setFocusOnActive:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},minLength:{type:Number,default:null},maxLength:{type:Number,default:null},decimals:{type:Number,default:null},decimalSeparator:{type:String,default:"."},min:{type:Number,default:null},max:{type:Number,default:null},validationTexts:{type:Object,default:()=>({min:"Value must be greater than or equal to {value}.",max:"Value must be less than or equal to {value}.",minLength:"Text must be at least {value} character(s) long.",maxLength:"Text cannot be longer than {value} characters."}),validator:t=>["min","max","minLength","maxLength"].every(e=>Object.keys(t).includes(e))},assistiveText:{type:Object,default:()=>({loaderActive:"loading."})}},data(){return{isActiveInt:!1,inputInt:"",previousInput:"",errorMessageInt:"",invalidInt:""}},computed:{idInt(){return this.id||p.createId()},showLabelRow(){const t=this.$slots["label-addition"],e=!!t&&!!t.length&&t.some(n=>{var i;return n.tag||((i=n.text)==null?void 0:i.trim())});return this.showLabel||e},showRemoveIcon(){return this.clearable&&!!this.inputInt},inputListeners(){return{...this.$listeners,input:t=>{let{value:e}=t.target;if(this.errorMessageInt="",this.invalidInt=!1,this.fieldType==="number"){const n=this.decimals?`\\${this.decimalSeparator}`:"",i=new RegExp(`[^e0-9${n}\\+-]`,"g"),a=this.decimals&&this.decimals!==+"-1"?`{0,${this.decimals}}`:"*",s=this.allowNegativeNumber?"-?":"",u=this.decimals&&this.decimals!==+"-1"?"-":"",r=new RegExp(`^((${s}[0-9]*${n}?([0-9]${a})(e(${u}|\\+)?[0-9]*)?)|-)$`,"g");if(e=e.replace(",",this.decimalSeparator),e=e.replace(".",this.decimalSeparator),e=e.replace(i,""),e=this.removeMultipleChars(e,this.decimalSeparator),e=this.removeMultipleChars(e,"e"),this.inputInt=e,this.decimals&&!Number.isNaN(Number(e))&&(e=this.roundDecimals(e),this.inputInt=e),e!==""&&!e.match(r)){this.inputInt=this.previousInput;return}if(this.min&&e&&Number(this.stringToFloat(e))<this.min){this.errorMessageInt=this.validationTexts.min.replace("{value}",this.min.toString()),this.invalidInt=!0;return}if(this.max&&Number(this.stringToFloat(e))>this.max){this.errorMessageInt=this.validationTexts.max.replace("{value}",this.max.toString()),this.invalidInt=!0;return}if(Number(this.stringToFloat(e))===1/0&&(e=0,this.inputInt=e),this.inputIsNaN(e))return;this.previousInput=e,e=this.stringToFloat(e)}if(this.fieldType!=="number"){if(this.minLength&&e&&e.length<this.minLength){this.errorMessageInt=this.validationTexts.minLength.replace("{value}",this.minLength.toString()),this.invalidInt=!0;return}if(this.maxLength&&e.length>this.maxLength){this.errorMessageInt=this.validationTexts.maxLength.replace("{value}",this.maxLength.toString()),this.invalidInt=!0;return}}this.$emit("input",e)},blur:t=>{const{value:e}=t.target;this.fieldType==="number"&&(e===""||Number.isNaN(Number(this.stringToFloat(e)))?(this.inputInt="",this.previousInput=""):(this.inputInt=this.translateFloat(Number(this.stringToFloat(e))),this.previousInput=this.inputInt)),this.$emit("blur",t)}}},inputElement(){if(window){if(this.$refs&&this.$refs.input)return this.$refs.input;const t=document.getElementById(this.idInt);if(t)return t;console.warn("BaseInput: you did not assign the same id to the BaseInputComponent and the input element!")}return null},allowNegativeNumber(){return this.min===null||this.min<0}},watch:{input:{handler(t){const e=this.fieldType==="number"?this.translateFloat(t):t;e!==this.inputInt&&(this.inputInt=e,this.previousInput=e,this.triggerInputEvent())},immediate:!0},inputInt(t){let e=t;if(this.fieldType==="number"){if(this.inputIsNaN(e))return;e=this.stringToFloat(e)}e!==this.input&&this.$emit("input",e)},isActive:{handler(t){t!==this.isActiveInt&&(this.isActiveInt=t)},immediate:!0},isActiveInt(t){this.inputElement&&t&&this.setFocusOnActive&&this.inputElement.focus(),this.$emit("update:is-active",t)},errorMessage:{handler(t){t!==this.errorMessageInt&&(this.errorMessageInt=t)},immediate:!0},invalid:{handler(t){t!==this.invalidInt&&(this.invalidInt=t)},immediate:!0},invalidInt(t){t!==this.invalid&&this.$emit("update:invalid",t)}},mounted(){this.max&&Number(this.stringToFloat(this.input))>this.max&&(this.inputInt=this.max),this.isActiveInt&&this.inputElement&&this.inputElement.focus()},methods:{onInputBlur(t){t.relatedTarget&&t.relatedTarget.tagName==="INPUT"&&(!t.relatedTarget.id||t.relatedTarget.id!==t.target.id)&&this.setFieldState(!1)},blurInput(t){this.setFieldState(!1),this.$emit("keydown",t)},clickedInside(t){this.disabled||(this.setFieldState(!0),this.$emit("click-input-field",t))},clickedOutsideInput(t){this.setFieldState(!1),this.$emit("clicked-outside",t)},removeInput(){this.inputInt="",this.inputElement&&this.inputElement.focus()},setFieldState(t){this.isActiveInt=t},handleInputTab(t){(!this.showRemoveIcon||t.shiftKey)&&this.setFieldState(!1)},translateFloat(t){return t==null?"":t.toString().replace(".",this.decimalSeparator)},stringToFloat(t){return t?Number(t.toString().replace(this.decimalSeparator,".")):""},inputIsNaN(t){const e=this.decimalSeparator,n=new RegExp(`^(-0|-?(([0-9]*\\${e}([0]*)?)?|(\\${e}([0-9]*)?)?))$`,"g");return t.length&&(t.toString().match(n)||Number.isNaN(this.stringToFloat(t)))},triggerInputEvent(){setTimeout(()=>{this.inputElement&&(this.inputElement.value=this.inputInt,this.inputElement.dispatchEvent(new Event("input")))},0)},roundDecimals(t){const e=t.split(this.decimalSeparator);return e[1]&&e[1].length>this.decimals?this.translateFloat(Number(Number(t).toFixed(this.decimals))):t},removeMultipleChars(t,e){const n=new RegExp(`\\${e}`,"g");return t.replace(n,(i,a,s)=>s.indexOf(i)===a?i:"")}}};var f=function(){var e=this,n=e._self._c;return n("div",{staticClass:"base-input"},[n("div",{class:["base-input__label-row",{hide:!e.showLabelRow}],on:{click:function(i){i.stopPropagation()}}},[n("label",{class:["base-input__label",{hide:!e.showLabel}],attrs:{for:e.idInt}},[e._v(" "+e._s(e.getLangLabel(e.label))+" ")]),n("div",{staticClass:"base-input__label-spacer"}),e._t("label-addition")],2),n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickedOutsideInput,expression:"clickedOutsideInput"}],class:["base-input__input-frame",{"base-input__input-frame__border":e.showInputBorder},{"base-input__input-frame__disabled":e.disabled},{"base-input__input-frame__invalid":e.invalidInt}],on:{focusin:e.clickedInside,click:e.clickedInside}},[n("div",{class:["base-input__input-container",{"base-input__input-container__is-active":e.isActiveInt&&e.useFormFieldStyling}]},[e._t("pre-input-field"),n("div",{class:["base-input__input-line-container",{"base-input__input-line-container__wrap":!e.hideInputField}]},[e._t("input-field-addition-before"),n("div",{staticClass:"base-input__input-line"},[e._t("input-field-inline-before"),n("div",{class:["base-input__input-wrapper",{"base-input__input-wrapper__fade-out":e.useFadeOut&&!e.isActiveInt&&!e.hideInputField}]},[e._t("input",function(){return[(e.fieldType==="number"?"text":e.fieldType)==="checkbox"?n("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.inputInt,expression:"inputInt"}],ref:"input",class:[e.inputClass,"base-input__input",{"base-input__input__hidden":e.hideInputField}],attrs:{id:e.idInt,placeholder:e.placeholder,list:e.dropDownListId||!1,disabled:e.disabled,"aria-disabled":e.disabled.toString(),"aria-activedescendant":e.linkedListOption,"aria-describedby":e.idInt,"aria-required":e.required.toString(),required:e.required,"aria-invalid":e.invalidInt.toString(),minlength:e.minLength,maxlength:e.maxLength,inputmode:e.fieldType==="number"&&e.allowNegativeNumber?"decimal":null,enterkeyhint:"done",autocomplete:"off",type:"checkbox"},domProps:{checked:Array.isArray(e.inputInt)?e._i(e.inputInt,null)>-1:e.inputInt},on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.handleInputTab.apply(null,arguments)},blur:e.onInputBlur,change:function(i){var a=e.inputInt,s=i.target,u=!!s.checked;if(Array.isArray(a)){var r=null,l=e._i(a,r);s.checked?l<0&&(e.inputInt=a.concat([r])):l>-1&&(e.inputInt=a.slice(0,l).concat(a.slice(l+1)))}else e.inputInt=u}}},e.inputListeners)):(e.fieldType==="number"?"text":e.fieldType)==="radio"?n("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.inputInt,expression:"inputInt"}],ref:"input",class:[e.inputClass,"base-input__input",{"base-input__input__hidden":e.hideInputField}],attrs:{id:e.idInt,placeholder:e.placeholder,list:e.dropDownListId||!1,disabled:e.disabled,"aria-disabled":e.disabled.toString(),"aria-activedescendant":e.linkedListOption,"aria-describedby":e.idInt,"aria-required":e.required.toString(),required:e.required,"aria-invalid":e.invalidInt.toString(),minlength:e.minLength,maxlength:e.maxLength,inputmode:e.fieldType==="number"&&e.allowNegativeNumber?"decimal":null,enterkeyhint:"done",autocomplete:"off",type:"radio"},domProps:{checked:e._q(e.inputInt,null)},on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.handleInputTab.apply(null,arguments)},blur:e.onInputBlur,change:function(i){e.inputInt=null}}},e.inputListeners)):n("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.inputInt,expression:"inputInt"}],ref:"input",class:[e.inputClass,"base-input__input",{"base-input__input__hidden":e.hideInputField}],attrs:{id:e.idInt,placeholder:e.placeholder,list:e.dropDownListId||!1,disabled:e.disabled,"aria-disabled":e.disabled.toString(),"aria-activedescendant":e.linkedListOption,"aria-describedby":e.idInt,"aria-required":e.required.toString(),required:e.required,"aria-invalid":e.invalidInt.toString(),minlength:e.minLength,maxlength:e.maxLength,inputmode:e.fieldType==="number"&&e.allowNegativeNumber?"decimal":null,enterkeyhint:"done",autocomplete:"off",type:e.fieldType==="number"?"text":e.fieldType},domProps:{value:e.inputInt},on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.handleInputTab.apply(null,arguments)},blur:e.onInputBlur,input:function(i){i.target.composing||(e.inputInt=i.target.value)}}},e.inputListeners))]},null,{id:e.idInt})],2),e.showRemoveIcon?n("button",{staticClass:"base-input__remove-icon-wrapper",on:{keydown:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"tab",9,i.key,"Tab")?null:e.blurInput.apply(null,arguments)},click:function(i){return i.stopPropagation(),e.removeInput.apply(null,arguments)}}},[e._t("remove-icon",function(){return[n("BaseIcon",{staticClass:"base-input__remove-icon",attrs:{name:"remove",title:"Clear input"}})]})],2):e._e(),e.loadable?n("div",{staticClass:"base-input__loader"},[n("BaseLoader",{attrs:{hide:!e.isLoading,"text-on-loader-show":e.assistiveText.loaderActive}})],1):e._e(),e._t("input-field-addition-after")],2)],2),e.showErrorIcon&&e.invalidInt?n("div",{staticClass:"base-input__error-icon-wrapper"},[e._t("error-icon",function(){return[n("BaseIcon",{staticClass:"base-input__error-icon",attrs:{name:"attention"}})]})],2):e._e(),e._t("post-input-field")],2)]),n("div",[e._t("below-input")],2),e.invalidInt&&e.errorMessageInt?n("div",{staticClass:"base-input__invalid-message"},[e._v(" "+e._s(e.getLangLabel(e.errorMessageInt))+" ")]):e._e()])},b=[],g=c.default(m,f,b,!1,null,"bc4b71b8",null,null);const I=g.exports;exports.default=I;
//# sourceMappingURL=BaseInput.vue.cjs.js.map
