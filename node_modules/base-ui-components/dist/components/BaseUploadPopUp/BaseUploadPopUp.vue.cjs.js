"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("../BaseButton/BaseButton.vue.cjs.js"),o=require("../BaseIcon/BaseIcon.vue.cjs.js"),u=require("../BaseLoader/BaseLoader.vue.cjs.js"),l=require("../BasePopUp/BasePopUp.vue.cjs.js"),c=require("../BaseProgressBar/BaseProgressBar.vue.cjs.js"),d=require("../../mixins/i18n.cjs.js");require("./BaseUploadPopUp.vue.cjs2.js");require("./BaseUploadPopUp.vue.cjs3.js");const p=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),g={name:"BaseUploadPopUp",components:{BaseButton:i.default,BaseIcon:o.default,BaseLoader:u.default,BasePopUp:l.default,BaseProgressBar:c.default},mixins:[d.default],props:{fileList:{type:Array,default:()=>[]},currentStatus:{type:String,default:"initial",validate(t){return["initial","saving","success","failed"].includes(t)}},cancelButtonText:{type:String,default:"cancel"},uploadText:{type:Object,default:()=>({title:"File Upload",upload:"Upload",done:"Done",retry:"Try Again",quotaExceeded:"Unfortunately you exceeded your quota, because you have only {space} of space left. Please remove some files to enable uploading."})},uploadPercentage:{type:Array,default:()=>[]},userSpace:{type:Number,default:1e7},rejectedFiles:{type:Array,default:()=>[]},uploadedFiles:{type:Array,default:()=>[]},fileErrors:{type:Array,default:()=>[],validator:t=>t.length?!["name","message"].every(e=>Object.keys(t).includes(e)):!0}},computed:{buttonText(){return this.currentStatus==="initial"||this.currentStatus==="saving"?this.getI18nTerm(this.getLangLabel(this.uploadText.upload)):this.rejectedFiles.length?this.getI18nTerm(this.getLangLabel(this.uploadText.retry)):this.getI18nTerm(this.getLangLabel(this.uploadText.done))},userQuotaExceeded(){return this.userSpace<this.fileList.reduce((t,e)=>t+e.size,0)}},methods:{convertSpace(t,e){let a=t;const r=e?1e3:1024;if(Math.abs(t)<r)return`${t} B`;const s=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let n=-1;do a/=r,n+=1;while(Math.abs(a)>=r&&n<s.length-1);return`${a.toFixed(1)} ${s[n]}`},getStatus(t){return this.uploadedFiles.includes(t)?"success":this.rejectedFiles.includes(t)?"fail":""},getErrorMessage(t){if(this.fileErrors.find(e=>e.name===t)){const{message:e}=this.fileErrors.find(a=>a.name===t);return e}return""},cancelUpload(){this.$emit("cancel-upload")},startUpload(){this.$emit("start-upload")},removeFile(t){this.$emit("remove-file",t)}}};var f=function(){var e=this,a=e._self._c;return e.fileList.length?a("BasePopUp",{attrs:{title:e.getI18nTerm(e.getLangLabel(e.uploadText.title))},on:{close:e.cancelUpload}},[a("transition-group",{attrs:{name:"list-complete"}},[e.userQuotaExceeded?a("div",{key:"user-warning",staticClass:"base-uploader-user-warning"},[a("BaseIcon",{staticClass:"icon base-uploader-user-warning-icon",attrs:{name:"attention"}}),e._v(" "+e._s(e.getI18nTerm(e.getLangLabel(e.uploadText.quotaExceeded),1,{space:e.convertSpace(e.userSpace)}))+" ")],1):e._e(),a("div",{key:"upload-area",staticClass:"popup-upload-area"},[a("transition-group",{staticClass:"transition",attrs:{name:"bar-move"}},e._l(e.fileList,function(r,s){return a("BaseProgressBar",{key:r.name,staticClass:"upload-bar",attrs:{progress:e.uploadPercentage[s],"file-name":r.name,"file-size":e.userQuotaExceeded?e.convertSpace(r.size):"",status:e.getStatus(r.name),"error-message":e.getErrorMessage(r.name),"show-remove":e.currentStatus==="initial"&&e.fileList.length>1},on:{"remove-item":function(n){return e.removeFile(s)}}})}),1)],1)]),e._t("default"),a("template",{slot:"button-row"},[e.currentStatus==="initial"||e.currentStatus==="failed"?a("BaseButton",{staticClass:"base-upload-bar-button",attrs:{text:e.getI18nTerm(e.cancelButtonText),icon:"remove","icon-position":"right","icon-size":"small"},on:{clicked:e.cancelUpload}}):e._e(),a("BaseButton",{ref:"uploadButton",staticClass:"base-upload-bar-button",attrs:{text:e.buttonText,icon:e.currentStatus!=="saving"&&e.currentStatus!=="failed"?"check-mark":"","icon-position":"right","icon-size":"small",disabled:e.currentStatus==="saving"||e.userQuotaExceeded},on:{clicked:e.startUpload}},[e.currentStatus==="saving"?a("template",{slot:"right-of-text"},[a("span",{staticClass:"base-upload-bar-loader"},[a("BaseLoader")],1)]):e._e()],2)],1)],2):e._e()},m=[],B=p.default(g,f,m,!1,null,"eaa8e63e",null,null);const h=B.exports;exports.default=h;
//# sourceMappingURL=BaseUploadPopUp.vue.cjs.js.map
