"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("../../directives/cleanDomNodes.cjs.js"),o=require("../../directives/InsertTextAsHtml.cjs.js");require("./BaseLink.vue.cjs2.js");const a=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),n={name:"BaseLink",components:{BaseIcon:()=>Promise.resolve().then(()=>require("../BaseIcon/BaseIcon.vue.cjs.js")).then(e=>e.default||e),BaseTooltipBox:()=>Promise.resolve().then(()=>require("../BaseTooltipBox/BaseTooltipBox.vue.cjs.js")).then(e=>e.default||e),BaseLoader:()=>Promise.resolve().then(()=>require("../BaseLoader/BaseLoader.vue.cjs.js")).then(e=>e.default||e)},directives:{cleanDomNodes:r.default,InsertTextAsHtml:o.default},props:{chipQueryName:{type:String,default:"chip-link"},externalLinkTarget:{type:String,default:"_blank",validator:e=>e==="_blank"||e==="_self"},identifierPropertyName:{type:String,default:"source"},identifierPropertyValue:{type:[Number,String],default:""},path:{type:String,default:""},renderLinkAs:{type:String,default:"RouterLink"},spaceAfter:{type:Boolean,default:!1},titleText:{type:Object,default:()=>({chip:"Open {type} {value} in search",tooltip:"Show more information",type:{artists:"artist",keywords:"keyword"}}),validator:e=>["chip","tooltip","type"].every(t=>Object.keys(e).includes(t))},tooltip:{type:[Boolean,Array],default:!1},tooltipAsync:{type:Array,default:()=>[]},tooltipStyles:{type:Object,default:()=>({})},tooltipTypeOnMobile:{type:String,default:"box",validator:e=>["box","fullscreen","modal"].includes(e)},tooltipThresholdTop:{type:Number,default:0},type:{type:String,default:""},url:{type:String,default:""},value:{type:String,default:""},altTitle:{type:String,default:""},additionalAttributes:{type:Object,default:()=>({})},interpretTextAsHtml:{type:Boolean,default:!1}},data(){return{isLoading:!1,scrollResizeTimeout:null,showTooltip:!1}},computed:{altTitleInt(){return this.altTitle||this.value},chipObj(){const e={};return e[this.identifierPropertyName]=this.identifierPropertyValue,e.type=this.type,e.value=this.altTitleInt,e},hasValidUrl(){return!!(this.url&&(this.url.match(/^([a-z][a-z0-9+\-.]*:\/\/)/)||this.url.match(/^mailto:/)||this.url.match(/^tel:/)))},isChip(){return!!(this.identifierPropertyValue&&this.type)},isExternal(){return this.hasValidUrl},isInternal(){return!!(this.identifierPropertyValue&&!this.type)},isRouterAvailable(){return!!this.$router},isTooltip(){return!!(this.tooltip||this.tooltip.length||this.tooltipAsync.length)},renderAs(){return this.isExternal?"a":this.isInternal||this.isChip?this.isRouterAvailable?this.renderLinkAs:"a":"span"},linkAttributes(){const e=this.isRouterAvailable?"to":"href",t={};return this.isExternal&&(t.href=this.url,t.target=this.externalLinkTarget),this.isInternal&&(t[e]=this.identifierPropertyValue),this.isChip&&(t[e]=`${this.path}?${this.chipQueryName}=${JSON.stringify(this.chipObj)}`),{...this.additionalAttributes,...t}},title(){return this.isTooltip?this.altTitle||this.titleText.tooltip:this.isChip?this.titleText.chip.replace("{type}",this.titleText.type[this.type]?this.titleText.type[this.type]:"").replace("{value}",this.altTitleInt).replace(/\s+/g," "):this.altTitle?this.altTitle:null}},watch:{tooltip(e){e&&(this.isLoading=!1,this.showTooltip=!0)}},mounted(){window.addEventListener("scroll",this.scrollResizeHandler),window.addEventListener("resize",this.scrollResizeHandler)},destroyed(){window.removeEventListener("scroll",this.scrollResizeHandler),window.removeEventListener("resize",this.scrollResizeHandler)},methods:{clickHandler(){this.isTooltip&&this.tooltipClicked()},closeTooltip(){this.showTooltip&&(this.showTooltip=!1)},async tooltipClicked(){if(this.tooltip&&this.$slots.tooltip||this.tooltip.length){this.showTooltip=!this.showTooltip;return}this.tooltipAsync.length&&(this.isLoading=!0,this.$emit("tooltip-clicked",this.tooltipAsync))},scrollResizeHandler(){this.scrollResizeTimeout&&(clearTimeout(this.scrollResizeTimeout),this.scrollResizeTimeout=null),this.scrollResizeTimeout=setTimeout(()=>{this.showTooltip&&this.closeTooltip()},100)}}};var p=function(){var t=this,i=t._self._c;return i(t.renderAs,t._b({directives:[{name:"clean-dom-nodes",rawName:"v-clean-dom-nodes"}],tag:"component",class:["base-link",{"base-link--chip":t.isChip,"base-link--internal":t.isInternal,"base-link--external":t.isExternal,"base-link--tooltip":t.isTooltip,"base-link--active":t.showTooltip,"base-link--space-after":t.spaceAfter}],attrs:{"aria-controls":t.isTooltip?`tooltipBox-${t._uid}`:null,"aria-expanded":t.isTooltip?t.showTooltip.toString():null,"aria-label":t.isChip||t.isTooltip?t.title:null,tabindex:t.isTooltip?0:null,title:t.title},on:{keyup:function(l){return!l.type.indexOf("key")&&t._k(l.keyCode,"enter",13,l.key,"Enter")?null:t.clickHandler.apply(null,arguments)},click:t.clickHandler}},"component",t.linkAttributes,!1),[t.isTooltip?t._e():[t._t("label",function(){return[i("span",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:t.value,interpretTextAsHtml:t.interpretTextAsHtml},expression:"{ value, interpretTextAsHtml }"}],class:{"no-clean":t.interpretTextAsHtml}})]},{label:t.value})],t.isTooltip?[i("span",{staticClass:"base-link__label"},[t._t("label",function(){return[i("span",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:t.value,interpretTextAsHtml:t.interpretTextAsHtml},expression:"{ value, interpretTextAsHtml }"}],class:{"no-clean":t.interpretTextAsHtml}})]},{label:t.value})],2),i("span",{ref:"icon",staticClass:"base-link__icon"},[i("BaseIcon",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],attrs:{name:"information"}})],1),t.isLoading?i("span",{staticClass:"base-link__loader"},[t.isLoading?i("BaseLoader"):t._e()],1):t._e(),t.showTooltip?i("BaseTooltipBox",{attrs:{id:`tooltipBox-${t._uid}`,"attach-to":t.$refs.icon,"modal-on-mobile":!1,role:"tooltip",styles:t.tooltipStyles,"threshold-top":t.tooltipThresholdTop,"type-on-mobile":t.tooltipTypeOnMobile},on:{close:function(l){t.showTooltip=!t.showTooltip}}},[t._t("tooltip",function(){return[t.tooltip.label?i("span",{staticClass:"base-tooltip__label"},[t._v(" "+t._s(t.tooltip.label)+" ")]):t._e(),t._l(t.tooltip,function(l,s){return i("div",{key:s,staticClass:"base-tooltip__row"},[t._v(" "+t._s(l.label)+": "),l.url?[i("a",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:l.value,interpretTextAsHtml:t.interpretTextAsHtml},expression:"{ value: item.value, interpretTextAsHtml }"}],staticClass:"base-link--external",attrs:{href:l.url,title:l.altTitle||void 0}},[t._v(" "+t._s(l.value)+" ")])]:[i("span",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:l.value,interpretTextAsHtml:t.interpretTextAsHtml},expression:"{ value: item.value, interpretTextAsHtml }"}]})]],2)})]},{item:t.tooltip})],2):t._e()]:t._e()],2)},u=[],h=a.default(n,p,u,!1,null,"77449154",null,null);const d=h.exports;exports.default=d;
//# sourceMappingURL=BaseLink.vue.cjs.js.map
