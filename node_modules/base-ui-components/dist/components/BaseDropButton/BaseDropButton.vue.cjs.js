"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const p=require("vue-click-outside"),u=require("../BaseButton/BaseButton.vue.cjs.js"),l=require("../BaseDropDownList/BaseDropDownList.vue.cjs.js"),d=require("../BaseIcon/BaseIcon.vue.cjs.js"),c=require("../../mixins/navigateList.cjs.js");require("./BaseDropButton.vue.cjs2.js");const f=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),h={name:"BaseDropButton",components:{BaseDropDownList:l.default,BaseButton:u.default,BaseIcon:d.default},directives:{ClickOutside:p},mixins:[c.default],props:{buttons:{type:Array,default:()=>[]},primaryButton:{type:[Object,String],default:null},expandButtonLabel:{type:String,default:"Show more Options"},identifierPropertyName:{type:String,default:"action"},labelPropertyName:{type:String,default:"label"}},data(){return{showOptions:!1,activeOption:null,dropDownPosition:{horizontal:"right",vertical:"bottom"},dropDownTransformation:!1}},computed:{primaryButtonInt(){return this.primaryButton?typeof this.primaryButton=="object"?this.primaryButton:this.buttons.find(n=>this.primaryButton===n[this.identifierPropertyName]):this.buttons[0]},buttonsInt(){return this.buttons.filter(n=>n[this.identifierPropertyName]!==this.primaryButtonInt[this.identifierPropertyName])}},watch:{buttonsInt(){this.calculateDropDownPosition()},showOptions(n){n?this.$nextTick(()=>{this.calculateDropDownPosition()}):this.activeOption=null}},mounted(){window&&window.addEventListener("resize",this.calculateDropDownPosition)},destroyed(){window.removeEventListener("resize",this.calculateDropDownPosition)},methods:{dropDownEnterAction(){this.activeOption?this.fireAction(this.activeOption[this.identifierPropertyName]):this.showOptions=!this.showOptions},navigateOptions(n){const t=n.key==="ArrowDown"||n.key==="Tab"&&!n.shiftKey,e=this.buttonsInt.indexOf(this.activeOption);this.activeOption=this.navigate(this.buttonsInt,t,e,!0)},fireAction(n){this.showOptions=!1,this.$emit("clicked",n)},calculateDropDownPosition(){if(this.$refs.dropDown){const n=window.visualViewport.width,t=this.$refs.dropDown.$el.getBoundingClientRect(),e=this.$refs.dropArea.getBoundingClientRect(),o=e.x,i=o+e.width,r=e.y,a=r+e.height;if(o+t.width>=n)if(i-t.width>=0)this.dropDownTransformation=!1,this.dropDownPosition.horizontal="left";else{const s=n-o-t.width;o+s>=0?(this.dropDownTransformation={transform:`translate(${s}px, 0px)`},this.dropDownPosition.horizontal="right"):(this.dropDownTransformation={transform:`translate(-${o}px, 0px)`},this.dropDownPosition.horizontal="right")}else this.dropDownTransformation=!1,this.dropDownPosition.horizontal="right";a+t.height>=window.visualViewport.height?r-t.height>=0&&(this.dropDownPosition.vertical="top"):this.dropDownPosition.vertical="bottom"}}}};var w=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>t.showOptions=!1,expression:"() => showOptions = false"}],staticClass:"base-drop-button"},[e("BaseButton",{class:{"base-drop-button__button__multi":t.buttonsInt&&t.buttonsInt.length},attrs:{text:t.primaryButtonInt[t.labelPropertyName],icon:t.primaryButtonInt.icon||null,"icon-size":"large"},on:{clicked:function(o){return t.fireAction(t.primaryButtonInt[t.identifierPropertyName])}},scopedSlots:t._u([{key:"left-of-text",fn:function(){return[t._t("left-of-text")]},proxy:!0},{key:"right-of-text",fn:function(){return[t._t("right-of-text")]},proxy:!0}],null,!0)}),t.buttonsInt&&t.buttonsInt.length?e("div",{ref:"dropArea",staticClass:"base-drop-button__options-area"},[e("button",{class:["base-drop-button__toggle-button",{"base-drop-button__toggle-button__active":t.showOptions}],attrs:{"aria-expanded":t.showOptions.toString(),"aria-label":t.expandButtonLabel,type:"button","aria-haspopup":"listbox"},on:{click:function(o){o.preventDefault(),t.showOptions=!t.showOptions},keydown:[function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:(o.preventDefault(),t.dropDownEnterAction.apply(null,arguments))},function(o){if(!o.type.indexOf("key")&&t._k(o.keyCode,"tab",9,o.key,"Tab"))return null;t.activeOption=null},function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"up",38,o.key,["Up","ArrowUp"])&&t._k(o.keyCode,"down",40,o.key,["Down","ArrowDown"])?null:(o.preventDefault(),t.navigateOptions.apply(null,arguments))}]}},[e("BaseIcon",{class:["base-drop-button__drop-icon",{"base-drop-button__drop-icon__rotated":t.showOptions}],attrs:{name:"drop-down"}})],1),t.showOptions?e("BaseDropDownList",{ref:"dropDown",class:["base-drop-button__drop-down",`base-drop-button__drop-down__${t.dropDownPosition.horizontal}`,`base-drop-button__drop-down__${t.dropDownPosition.vertical}`],style:t.dropDownTransformation,attrs:{"drop-down-options":t.buttonsInt,"active-option":t.activeOption,"active-styled":!1,"aria-activedescendant":t.activeOption?`button-${t.activeOption.action}`:!1,"identifier-property-name":t.identifierPropertyName,"label-property-name":t.labelPropertyName},scopedSlots:t._u([{key:"option",fn:function({option:o}){return[e("button",{class:["base-drop-button__action",{"base-drop-button__action__active":t.activeOption&&o[t.identifierPropertyName]===t.activeOption[t.identifierPropertyName]}],attrs:{id:`button-${o[t.identifierPropertyName]}`,type:"button"},on:{keydown:function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"up",38,i.key,["Up","ArrowUp"])&&t._k(i.keyCode,"down",40,i.key,["Down","ArrowDown"]))return null;i.preventDefault()},click:function(i){return i.preventDefault(),t.fireAction(o[t.identifierPropertyName])}}},[o.icon?e("BaseIcon",{staticClass:"base-drop-button__action-icon",attrs:{name:o.icon}}):t._e(),e("span",[t._v(t._s(o[t.labelPropertyName]))])],1)]}}],null,!1,673672794)}):t._e()],1):t._e()],1)},y=[],_=f.default(h,w,y,!1,null,"cd174e8c",null,null);const b=_.exports;exports.default=b;
//# sourceMappingURL=BaseDropButton.vue.cjs.js.map
