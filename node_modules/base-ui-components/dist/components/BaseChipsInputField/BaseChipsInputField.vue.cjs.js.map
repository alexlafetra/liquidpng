{"version":3,"file":"BaseChipsInputField.vue.cjs.js","sources":["../../../src/components/BaseChipsInputField/BaseChipsInputField.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"chipsInputField\"\n    class=\"base-chips-input-field\">\n    <!-- INPUT LABEL AND FIELD -->\n    <BaseInput\n      :id=\"internalId\"\n      ref=\"baseInput\"\n      v-model=\"inputInt\"\n      :field-type=\"inputType\"\n      :placeholder=\"allowMultipleEntries || !selectedListInt.length ? placeholder : ''\"\n      :label=\"label\"\n      :show-label=\"showLabel\"\n      :show-input-border=\"showInputBorder\"\n      :is-active.sync=\"isActiveInt\"\n      :use-form-field-styling=\"useFormFieldStyling\"\n      :drop-down-list-id=\"dropDownListId\"\n      :linked-list-option=\"linkedListOption\"\n      :hide-input-field=\"!allowMultipleEntries && !!selectedListInt.length\"\n      :invalid=\"invalid\"\n      :required=\"required\"\n      :disabled=\"disabled\"\n      :clearable=\"clearable\"\n      :loadable=\"loadable\"\n      :error-message=\"errorMessage\"\n      :show-error-icon=\"showErrorIcon\"\n      :is-loading=\"isLoading\"\n      :input-class=\"inputClass\"\n      :set-focus-on-active=\"setFocusOnActive\"\n      :assistive-text=\"{\n        loaderActive: assistiveText.loaderActive,\n      }\"\n      @keydown.enter.prevent=\"addOption\"\n      @keydown=\"checkKeyEvent\"\n      v-on=\"inputListeners\">\n      <template\n        #label-addition>\n        <!-- @slot Slot to allow for additional elements on the right side of the label row <div> (e.g. language tabs)) -->\n        <slot name=\"label-addition\" />\n        <button\n          v-if=\"sortable\"\n          :aria-label=\"`${label}. ${sortText.replace(/[—–-]/, 'to')}`\"\n          type=\"button\"\n          class=\"base-chips-input-field__sort\"\n          @click=\"sortSelectedList(selectedListInt)\">\n          {{ sortText }}\n        </button>\n      </template>\n      <template #pre-input-field>\n        <!-- @slot slot to add elements within the form field but in a row before the actual input field. for an example see [BaseInput](BaseInput)-->\n        <slot name=\"pre-input-field\" />\n      </template>\n      <template\n        #input-field-addition-before>\n        <!-- @slot Slot to allow for additional elements in the input field <div> (before <input>) -->\n        <slot name=\"input-field-addition-before\" />\n        <div\n          v-if=\"displayChipsInline\"\n          class=\"base-chips-input-field__chips\">\n          <template v-if=\"draggable && !chipsEditable\">\n            <draggable\n              v-model=\"selectedListInt\"\n              :set-data=\"setDragElement\"\n              :force-fallback=\"true\"\n              :animation=\"200\"\n              handle=\".base-chip__text\"\n              @start=\"drag = true\"\n              @end=\"onDragEnd\">\n              <transition-group\n                :name=\"!drag ? 'flip-list' : null\"\n                type=\"transition\"\n                class=\"base-chips-input-field__chips-transition\">\n                <template\n                  v-for=\"(entry, index) in selectedListInt\">\n                  <!-- @slot a slot to provide customized chips\n                    @binding { object } entry - one selected option displayed as chip\n                    @binding { number } index - the index of the entry in the selectedList array\n                    @binding { number } indexActiveForRemove - the index of the chip that is currently active to be removed (for keyboard handling)\n                    @binding { function } removeEntry - function to remove the entry from selectedList, needs `entry` and `index` as arguments\n                  -->\n                  <slot\n                    name=\"chip\"\n                    v-bind=\"{\n                      entry,\n                      index,\n                      indexActiveForRemove,\n                      removeEntry,\n                    }\">\n                    <BaseChip\n                      :id=\"entry.idInt\"\n                      :key=\"allowMultipleEntries ? 'chip-' + entry.idInt : index\"\n                      :entry=\"getLangLabel(entry[labelPropertyName], true)\"\n                      :hover-box-content=\"hoverboxContent\"\n                      :is-linked=\"alwaysLinked || entry[identifierPropertyName] === 0\n                        || !!entry[identifierPropertyName]\"\n                      :chip-active=\"indexActiveForRemove === index\"\n                      :is-removable=\"chipsRemovable\"\n                      :interpret-text-as-html=\"interpretChipsLabelAsHtml && !!entry[identifierPropertyName]\"\n                      @remove-entry=\"removeEntry(entry, index)\"\n                      @hoverbox-active=\"hoverBoxActive($event, entry)\" />\n                  </slot>\n                </template>\n              </transition-group>\n            </draggable>\n          </template>\n          <template v-else>\n            <template\n              v-for=\"(entry, index) in selectedListInt\">\n              <!-- @slot a slot to provide customized chips\n                @binding { object } entry - one selected option displayed as chip\n                @binding { number } index - the index of the entry in the selectedList array\n                @binding { number } indexActiveForRemove - the index of the chip that is currently active to be removed (for keyboard handling)\n                @binding { function } removeEntry - function to remove the entry from selectedList, needs `entry` and `index` as arguments\n              -->\n              <slot\n                name=\"chip\"\n                v-bind=\"{\n                  entry,\n                  index,\n                  indexActiveForRemove,\n                  removeEntry,\n                }\">\n                <BaseChip\n                  :id=\"entry.idInt\"\n                  :key=\"allowMultipleEntries ? 'chip-' + entry.idInt : index\"\n                  :entry=\"getLangLabel(entry[labelPropertyName], true)\"\n                  :hover-box-content=\"hoverboxContent\"\n                  :editable=\"chipsEditable\"\n                  :is-linked=\"alwaysLinked || entry[identifierPropertyName] === 0\n                    || !!entry[identifierPropertyName]\"\n                  :chip-active=\"indexActiveForRemove === index\"\n                  :assistive-text=\"assistiveText.selectedOption\"\n                  :is-removable=\"chipsRemovable\"\n                  :interpret-text-as-html=\"interpretChipsLabelAsHtml && !!entry[identifierPropertyName]\"\n                  @remove-entry=\"removeEntry(entry, index)\"\n                  @value-changed=\"modifyListEntry($event, index)\"\n                  @hoverbox-active=\"hoverBoxActive($event, entry)\" />\n              </slot>\n            </template>\n          </template>\n        </div>\n      </template>\n      <template #input-field-inline-before>\n        <!-- @slot to add elements directly inline before the input (contrary to `input-field-addition-before` this does not wrap). for an example see [BaseInput](BaseInput)-->\n        <slot name=\"input-field-inline-before\" />\n      </template>\n      <template #input-field-addition-after>\n        <!-- @slot for adding elements after input -->\n        <slot name=\"input-field-addition-after\" />\n      </template>\n      <template #post-input-field>\n        <!-- @slot for adding elements at the end covering the whole height -->\n        <slot name=\"post-input-field\" />\n      </template>\n      <template #error-icon>\n        <!-- @slot use a custom icon instead of standard error/warning icon -->\n        <slot name=\"error-icon\" />\n      </template>\n      <template #remove-icon>\n        <!-- @slot use a custom icon instead of standard remove icon -->\n        <slot name=\"remove-icon\" />\n      </template>\n      <template #below-input>\n        <!-- @slot below-input slot added to e.g. add drop down -->\n        <slot name=\"below-input\" />\n      </template>\n    </BaseInput>\n  </div>\n</template>\n\n<script>\nimport Draggable from 'vuedraggable';\nimport { sort, createId } from '@/utils/utils';\nimport BaseInput from '@/components/BaseInput/BaseInput';\nimport { ref } from 'vue';\nimport { useAnnouncer } from '@/composables/useAnnouncer';\nimport i18n from '../../mixins/i18n';\nimport navigateMixin from '../../mixins/navigateList';\n\n/** input field with chips functionalities */\n\nexport default {\n  name: 'BaseChipsInputField',\n  components: {\n    BaseInput,\n    BaseChip: () => import('@/components/BaseChip/BaseChip').then(m => m.default || m),\n    Draggable,\n  },\n  mixins: [\n    i18n,\n    navigateMixin,\n  ],\n  model: {\n    prop: 'input',\n    event: 'input',\n  },\n  props: {\n    /**\n     if field is occurring more then once - set an id\n     */\n    id: {\n      type: String,\n      default: '',\n    },\n    /**\n     * list of selected options (strings or objects - set `isStringArray` `true` if it is an array of strings),\n     *  displayed as chips\n     * (you can use the `.sync` modifier on this property)\n     */\n    selectedList: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * input string\n     */\n    input: {\n      type: String,\n      default: '',\n    },\n    /**\n     * specify input field type\n     * @values text, search\n     */\n    inputType: {\n      type: String,\n      default: 'text',\n      validator: val => ['text', 'search'].includes(val),\n    },\n    /**\n     * input field label\n     */\n    label: {\n      type: String,\n      required: true,\n    },\n    /**\n     * define if label should be visible\n     */\n    showLabel: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * input field placeholder\n     */\n    placeholder: {\n      type: String,\n      default: null,\n    },\n    /**\n     * define if the user can add an option that is not in the list\n     */\n    // can the user add Entries that are not available in the vocabulary (selectable list)\n    allowUnknownEntries: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * define only a single or multiple options can be selected\n     */\n    // define if one or several entries can be selected from drop down menu\n    allowMultipleEntries: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * this means typed input will be added as chip directly\n     */\n    addSelectedEntryDirectly: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * if `true` a button with that functionality will be visible\n     */\n    sortable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * define if chips should be draggable\n     */\n    draggable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * define if entries should always appear linked (-> with grey background)\n     */\n    alwaysLinked: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * set content for the info box activatable by click.\n     * see [BaseHoverBox](BaseHoverBox) for more details\n     */\n    hoverboxContent: {\n      type: Object,\n      default: () => ({}),\n    },\n    /**\n     * show spinner to indicate that something is loading\n     * (for dynamically fetched entries that need to do backend requests)\n     */\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * if sorting is enabled this will be the text shown in the button\n     */\n    sortText: {\n      type: String,\n      default: 'Sort A – Z',\n    },\n    /**\n     * if `true` sorting will consider the last string in a label or if a comma is\n     * present the string before the comma\n     */\n    sortName: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * set a language (ISO 639-1)\n     */\n    language: {\n      type: String,\n      default: '',\n    },\n    /**\n     * option to have the border of the input field not displayed\n     */\n    showInputBorder: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * define if standard form field styling should be\n     * used (otherwise no border, no box shadow)\n     */\n    useFormFieldStyling: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * specify the id of a linked drop down list\n     */\n    dropDownListId: {\n      type: String,\n      default: '',\n    },\n    /**\n     * specify a linked list option (e.g. drop down)\n     *   (will be used in `aria-activedescendant` attribute)\n     */\n    linkedListOption: {\n      type: [Number, String],\n      default: null,\n    },\n    /**\n     * specify the object property that should be used as identifier\n     */\n    identifierPropertyName: {\n      type: String,\n      default: '',\n    },\n    /**\n     * specify the object property that should be used as value to be displayed\n     */\n    labelPropertyName: {\n      type: String,\n      default: 'label',\n    },\n    /**\n     * specify `true` if `selectedList` array is a array of strings\n     */\n    isStringArray: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * property for special case component [BaseChipsBelow](BaseChipsBelow) - if `false` in this case chips will\n     * not be displayed in the input field\n     */\n    displayChipsInline: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * mark as required field (currently only used for aria-required)\n     */\n    required: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * mark the form field as invalid and ideally also provide an error message\n     * to display below the form field\n     * for an example see [BaseInput](BaseInput)\n     */\n    invalid: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * set `true` if input field should be disabled\n     * for an example see [BaseInput](BaseInput)\n     */\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * add an error message to be displayed below form field if field is invalid\n     * for an example see [BaseInput](BaseInput)\n     */\n    errorMessage: {\n      type: String,\n      default: '',\n    },\n    /**\n     * define if error icon should be shown\n     * for an example see [BaseInput](BaseInput)\n     */\n    showErrorIcon: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * if `true` a remove icon will be shown allowing to remove\n     * all input at once\n     * for an example see [BaseInput](BaseInput)\n     */\n    clearable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * if `true` space is reserved for a loader that can be activated\n     * with the 'isLoading' prop\n     */\n    loadable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * possibility to steer input field active state from outside\n     * it is possible to use the `.sync` modifier here\n     */\n    isActive: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * specify additional input field styling\n     */\n    inputClass: {\n      type: String,\n      default: '',\n    },\n    /**\n     * use this prop to deactivate automatic setting of focus as soon as input element\n     * becomes active - this might require external handling of focus setting!\n     */\n    setFocusOnActive: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * define true if chip should be editable on click\n     *\n     * **Caveat**: chips can not be both draggable AND editable and it can not show\n     *  `hoverBoxContent` as soon as it is editable respectively - if both are set `true` edit\n     *  functionality takes precedent - chip will not be draggable, `hoverBoxContent` will not\n     *  be shown!\n     */\n    chipsEditable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * this prop gives the option to add assistive text for screen readers\n     * properties:\n     *\n     * **selectedOption**: text read when a selected option is focused (currently only\n     *  working for editable chips)\n     * **loaderActive**: text that is announced when results are being fetched (prop\n     *  `isLoading` is set `true`)\n     * **optionAdded**: text read when option was added to the selected list. string {label}\n     *  could be added to be replaced by the actual chip label (value in [`labelPropertyName`])\n     * **optionToRemoveSelected**: text read when option is marked active for removal (by using\n     *  backspace in empty input field). string {label} could be added to be replaced\n     *  by the actual chip label (value in [`labelPropertyName`])\n     * **optionRemoved**: text read when option was removed from the selected list. string {label}\n     *  could be added to be replaced by the actual chip label (value in [`labelPropertyName`])\n     */\n    assistiveText: {\n      type: Object,\n      default: () => ({\n        selectedOption: '',\n        loaderActive: 'loading.',\n        optionAdded: 'option {label} added to selected list.',\n        optionToRemoveSelected: 'option {label} from selected list marked for removal. Press delete or backspace to remove.',\n        optionRemoved: 'option {label} removed.',\n      }),\n    },\n    /**\n     * define if selected options chips should come with a remove icon\n     * (usually desired usability wise just an additional option for `allowMultipleEntries`\n     * `false` if there is any other means of removal\n     * (e.g. [BaseAdvancedSearch](#baseadvancedsearch)))\n     */\n    chipsRemovable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * if necessary chip text can\n     *  be rendered as v-html directive\n     *\n     *  **caveat**: setting this variable `true` can lead to XSS attacks. Only use\n     *    this prop on trusted content and never on user-provided content. This is\n     *    also why this will only take effect on selected chips with identifier (=selected\n     *    from the options not a direct user input)\n     */\n    interpretChipsLabelAsHtml: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup() {\n    /**\n     * set up component reference\n     * @type {Ref<UnwrapRef<null|HTMLElement>>}\n     */\n    const chipsInputField = ref(null);\n    // use composable to announce screen reader text on actions taken (e.g.\n    // add chip to selected list or remove chip\n    const { announcement } = useAnnouncer(chipsInputField);\n    return {\n      chipsInputField,\n      announcement,\n    };\n  },\n  data() {\n    return {\n      /**\n       * internal representation of selectedList\n       * @type {(String[]|Object[])}\n       */\n      selectedListInt: [],\n      /**\n       * store active state of the base input field\n       * @type {boolean}\n       */\n      isActiveInt: false,\n      /**\n       * for removing chips via backspace, to get delay after\n       * keydown event\n       * @type {?number}\n       */\n      timeout: null,\n      /**\n       * for removing chips via backspace, to no accidentally delete\n       * chips on multiple backspace keydown events\n       * @type {boolean}\n       */\n      fired: false,\n      /**\n       * for dragging functionality (transition)\n       * @type {boolean}\n       */\n      drag: false,\n      /**\n       * variable for the currently active chip (for arrow key use)\n       * @type {number}\n       */\n      indexActiveForRemove: -1,\n      /**\n       * variable for internal input handling\n       * @type {string}\n       */\n      inputInt: '',\n    };\n  },\n  computed: {\n    /**\n     * if an id was not provided in props we create an internal id\n     * @returns {string}\n     */\n    internalId() {\n      return this.id || createId();\n    },\n    inputListeners() {\n      return {\n        // add all the listeners from the parent\n        ...this.$listeners,\n        // and add custom listeners\n        ...{\n          // keep this BaseInput event from propagating and use component's own event\n          'update:is-active': () => {},\n        },\n      };\n    },\n  },\n  watch: {\n    /**\n     * selectedList is watched to also change selectedListInt if necessary\n     * was thinking of making this a computed property however if you do\n     * list manipulations (e.g. push, splice) the setter is not triggered\n     * --> more complicated to inform parent (because sometimes setter triggered sometimes not)\n     */\n    selectedList: {\n      handler(val) {\n        // check that new value is not undefined (would throw error with map)\n        if (val) {\n          // create a temporary list object and add an internal id\n          const tempList = val.map(option => ({\n            ...(this.isStringArray ? { [this.labelPropertyName]: option }\n              : option),\n            // adding an internal id - either the one given by identifierProperty or\n            // if not available - assign a previously assigned one or a new id\n            ...{ idInt: option[this.identifierPropertyName] || this.getIdInt(option) },\n          }));\n          // only update if internal list is different from outside list\n          if (JSON.stringify(tempList) !== JSON.stringify(this.selectedListInt)) {\n            this.selectedListInt = tempList;\n          }\n        } else {\n          this.selectedListInt = [];\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n    /**\n     * to have isActive prop in sync\n     * @param {boolean} val - internal input field active value\n     */\n    isActiveInt(val) {\n      /**\n       * event updating the is-active prop in case of internal changes\n       *\n       * @event update:is-active\n       * @param {boolean} - is input field active\n       */\n      this.$emit('update:is-active', val);\n    },\n    /**\n     * watch for outside changes in the input field active state\n     * @param {boolean} val - the prop value set from outside\n     */\n    isActive: {\n      handler(val) {\n        // check is in sync already\n        if (val !== this.isActiveInt) {\n          this.isActiveInt = val;\n        }\n      },\n      immediate: true,\n    },\n    /**\n     * also input needs to be synchronized between component and parent (if necessary)\n     */\n    input: {\n      handler(val) {\n        // check if sync already\n        if (val !== this.inputInt) {\n          this.inputInt = val;\n        }\n      },\n      immediate: true,\n    },\n    /**\n     * watch if input changes internally and emit event if necessary\n     */\n    inputInt: {\n      handler(val) {\n        if (val !== this.input) {\n          /**\n           * emitting the input string if changed internally\n           * @event input\n           * @param {string} - the new input string\n           */\n          this.$emit('input', val);\n        }\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    /** KEYBOARD HANDLING FOR CHIPS */\n\n    /**\n     * function triggered on any keydown on the input field\n     * @param {KeyboardEvent} event\n     */\n    checkKeyEvent(event) {\n      const { key } = event;\n      // define conditions in which input field should be set inactive (in styling and blurring)\n      if ((key === 'Tab' && !(this.clearable && !!this.inputInt)) || (key === 'Enter' && !this.allowMultipleEntries)) {\n        this.isActiveInt = false;\n      }\n      // if event was Delete check if a chip should be deleted\n      if (this.chipsRemovable && (key === 'Backspace' || key === 'Delete')) {\n        // if backspace (once) is used make last chip active\n        if (key === 'Backspace' && !this.fired\n          && !this.inputInt && this.indexActiveForRemove < 0) {\n          this.indexActiveForRemove = this.selectedListInt.length - 1;\n          // on second backspace set timeout for delete\n        } else if (this.indexActiveForRemove >= 0 && !this.fired && !this.inputInt) {\n          // check if there is actually anything left to remove\n          this.removeEntry(\n            this.selectedListInt[this.indexActiveForRemove],\n            this.indexActiveForRemove,\n          );\n          this.indexActiveForRemove = -1;\n        }\n        // necessary to prevent accidental delete of chips when user keeps backspace pressed\n        this.fired = true;\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        this.timeout = setTimeout(() => {\n          this.fired = false;\n        }, 200);\n        // if there is no input and arrow right or left was pressed\n        // navigate between the chips\n      } else if (!this.inputInt && (event.key === 'ArrowRight' || event.key === 'ArrowLeft')) {\n        // determine if index should be increased or decreased\n        const isIndexUp = event.key === 'ArrowRight';\n        // do the navigation in the chips list, returns the chip that should be\n        // active after navigation\n        const activeChip = this.navigate(\n          this.selectedListInt,\n          isIndexUp,\n          this.indexActiveForRemove,\n          true,\n        );\n        // set the chip active for removal (currently active one)\n        this.indexActiveForRemove = this.selectedListInt.indexOf(activeChip);\n        // in any other key event reset the chip active for remove\n      } else {\n        this.indexActiveForRemove = -1;\n      }\n      // if an entry was set active for removal by any key action - announce it\n      // to the screen reader user\n      if (this.indexActiveForRemove >= 0) {\n        // inform screen reader user\n        this.announcement = this.assistiveText.optionToRemoveSelected\n          .replace('{label}', this.selectedListInt[this.indexActiveForRemove][this.labelPropertyName]);\n      }\n    },\n\n    /** LIST MODIFICATIONS */\n\n    /**\n     * remove an entry from the list of selected entries\n     *\n     * @param {Object} option - the option selected from the list of selected\n     * options\n     * @param {number} index - the index of the item in the list\n     */\n    removeEntry(option, index) {\n      // save the label for screen reader information\n      const optionLabel = this.selectedListInt[index][this.labelPropertyName];\n      // remove the item from the internal list\n      this.selectedListInt.splice(index, 1);\n      // emit an event to inform parent of altered list\n      this.updateParentList(this.selectedListInt);\n      // also emit event to inform which item was removed\n      /**\n       * event emitted if option is removed from the list of selected\n       * options (additionally to altered list in case parent needs to know\n       * which item was removed)\n       *\n       * @event removed\n       * @aram {Object} - the removed option\n       */\n      this.$emit('removed', option);\n      // lay the focus on the input field\n      const inputElements = this.$refs.baseInput.$el.getElementsByTagName('input');\n      const mainInputElement = Array.from(inputElements).find(elem => elem.id === this.internalId);\n      if (mainInputElement) {\n        // trigger an input click here instead of focus so that clicked-outside is triggered for all\n        // other input fields (and potential drop downs / pop ups are closed)\n        mainInputElement.click();\n      }\n      // add a timeout so announcement is not interfered with by default drop down list announcement\n      setTimeout(() => {\n        // inform screen reader user\n        this.announcement = this.assistiveText.optionRemoved\n          .replace('{label}', optionLabel);\n      }, 1000);\n    },\n    /**\n     * adding an selected option to the array of selected options\n     */\n    addOption() {\n      // if there is input, unknown options are allowed and direct option addition\n      // is enabled - we can add the option to the selected list directly\n      if (this.inputInt && this.allowUnknownEntries && this.addSelectedEntryDirectly) {\n        // check for duplicates\n        const duplicate = this.selectedListInt\n          .find(option => option[this.labelPropertyName] === this.inputInt);\n        // if no duplicate was found add the entry\n        if (!duplicate) {\n          // where should new item be placed (added at the end or replacing old entry\n          // if single select\n          const setIndex = this.allowMultipleEntries ? this.selectedListInt.length : 0;\n          // create object to add\n          const newEntry = {\n            idInt: this.getIdInt(),\n            [this.labelPropertyName]: this.inputInt,\n          };\n          // set entry in selectedList\n          this.$set(this.selectedListInt, setIndex, newEntry);\n          // emit an event to inform parent of altered list\n          this.updateParentList(this.selectedListInt);\n          // inform screen reader user\n          this.announcement = this.assistiveText.optionAdded\n            .replace('{label}', this.inputInt);\n          // otherwise just emit event to parent (for informing user)\n        } else {\n          /**\n           * emitted when user was trying to add an option but there was already\n           * an option with the same value in the list of selected options\n           *\n           * @event duplicate\n           * @param {Object} - the option with the identical value\n           */\n          this.$emit('duplicate', duplicate);\n        }\n        // reset the input\n        this.inputInt = '';\n      }\n    },\n    modifyListEntry(newString, index) {\n      // since this is also checked when assigning value to chip we should also check\n      // here if label is lang object (e.g. {de: '', en: '' })\n      if (typeof this.selectedListInt[index][this.labelPropertyName] === 'object'\n        && this.selectedListInt[index][this.labelPropertyName][this.language] !== undefined) {\n        // if so then assign the new value to the current language\n        // and also remove the id since the entry was altered and is not identical with the entry\n        // belonging to this id anymore\n        this.selectedListInt[index] = {\n          [this.labelPropertyName]: {\n            [this.language]: newString,\n          },\n        };\n        // else check if label prop is string and assign it directly\n        // (otherwise this case (an object with unknown properties) can not be handled)\n      } else if (typeof this.selectedListInt[index][this.labelPropertyName] === 'string') {\n        // and also remove the id since the entry was altered and is not identical with the entry\n        // belonging to this id anymore\n        this.selectedListInt[index] = {\n          [this.labelPropertyName]: newString,\n        };\n      }\n      // trigger change propagation to parent\n      this.updateParentList(this.selectedListInt);\n    },\n    /**\n     * function called when parent needs to be informed of selected\n     * list changes\n     *\n     * @param {Object[]} newSelectedListInt - the altered list of selected options\n     */\n    updateParentList(newSelectedListInt) {\n      let tempList = JSON.parse(JSON.stringify(newSelectedListInt));\n      // if provided selected list consisted of strings - return this way\n      if (this.isStringArray) {\n        tempList = tempList.map(selected => selected[this.labelPropertyName]);\n      } else if (newSelectedListInt.length) {\n        // remove internal ids again\n        tempList = tempList.map((selected) => {\n          this.$delete(selected, 'idInt');\n          return selected;\n        });\n      }\n      /**\n       * inform parent of changes to selected option list\n       * (you can use the .sync modifier on prop selectedList)\n       *\n       * @event update:selected-list\n       * @param {(Object[], String[])} - the modified list - array\n       * of strings is returned if isStringArray was set to true\n       */\n      this.$emit('update:selected-list', tempList);\n    },\n    /**\n     * every selected option needs an internal id to be uniquely identifyable\n     * by draggablejs\n     *\n     * @param {Object} [option=null] - the option the internal id is determined for\n     */\n    getIdInt(option = null) {\n      // check if the selected option already has an internal identifier\n      // not applicable for newly created entries so check if option was provided\n      if (option) {\n        // get matching option by value (this is only for options that dont have an\n        // external id provided anyways (also duplicates are excluded in 'addOption()'\n        const matchingOption = this.selectedListInt\n          .find(opt => opt[this.labelPropertyName] === option[this.labelPropertyName]\n            || opt[this.labelPropertyName] === option);\n        // check if there was exactly one matching result\n        if (matchingOption) {\n          return matchingOption.idInt;\n        }\n      }\n      // else return a new internal id\n      return createId();\n    },\n\n    /** SORTING */\n    /** function called when the 'sort' button is clicked */\n    sortSelectedList() {\n      this.isActiveInt = false;\n      sort(\n        this.selectedListInt,\n        this.labelPropertyName,\n        this.sortName,\n        this.language ? this.getLangLabel : null,\n      );\n      this.updateParentList(this.selectedListInt);\n    },\n\n    /** DRAGGABLE FUNCTIONALITIES */\n\n    /**\n     * need to set custom due to some strange effects not showing correct element in some cases\n     * @param {DataTransfer} dataTransfer\n     * @param {HTMLElement} dragEl - the dragged HTML Element\n     */\n    setDragElement(dataTransfer, dragEl) {\n      const img = dragEl.cloneNode(true);\n      img.id = 'chip-inline-drag';\n      img.style.position = 'absolute';\n      img.style.top = '-99999px';\n      img.style.left = '-99999px';\n\n      // add the element to the dom\n      document.body.appendChild(img);\n      dataTransfer.setDragImage(img, 0, 0);\n    },\n    onDragEnd() {\n      this.drag = false;\n      const elem = document.getElementById('chip-inline-drag');\n      if (elem) {\n        elem.parentNode.removeChild(elem);\n      }\n      // check if dragging led to differently sorted list\n      // and inform parent if yes\n      if (JSON.stringify(this.selectedList) !== JSON.stringify(this.selectedListInt)) {\n        this.updateParentList(this.selectedListInt);\n      }\n    },\n\n    /** HOVER BOX FUNCTIONALITY */\n\n    /**\n     * function triggered when a chip is clicked and hover box functionality is\n     * available\n     * @param {boolean} value - should hover box be showing or not\n     * @param {Object} option - the option on which click was made\n     */\n    hoverBoxActive(value, option) {\n      /**\n       * event emitted on show / hide hoverbox\n       *\n       * @property {boolean} value - value describing if hoverbox active is true or false\n       * @property {Object} option - the option for which the hoverbox was activated\n       */\n      this.$emit('hoverbox-active', { value, option });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"../../styles/variables\";\n\n  .base-chips-input-field {\n    width: 100%;\n    text-align: left;\n\n    .base-chips-input-field__chips {\n      max-width: 100%;\n\n      .base-chips-input-field__chips-transition {\n        display: flex;\n        flex-wrap: wrap;\n      }\n    }\n\n    .base-chips-input-field__sort {\n      cursor: pointer;\n      margin-left: $spacing;\n      white-space: nowrap;\n      transition: all 0.2s ease;\n\n      &:hover, &:active, &:focus {\n        color: $app-color;\n      }\n    }\n\n    .base-chips-input-field__loader {\n      margin: 0 $spacing;\n      transform: scale(0.5);\n      pointer-events: none;\n    }\n  }\n</style>\n"],"names":["_sfc_main","BaseInput","m","Draggable","i18n","navigateMixin","val","chipsInputField","ref","announcement","useAnnouncer","createId","tempList","option","event","key","isIndexUp","activeChip","index","optionLabel","inputElements","mainInputElement","elem","duplicate","setIndex","newEntry","newString","newSelectedListInt","selected","matchingOption","opt","sort","dataTransfer","dragEl","img","value"],"mappings":"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"}