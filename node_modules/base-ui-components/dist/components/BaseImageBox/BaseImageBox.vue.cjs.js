"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const b=require("../../directives/InsertTextAsHtml.cjs.js"),m=require("../BaseBox/BaseBox.vue.cjs.js"),g=require("../BaseIcon/BaseIcon.vue.cjs.js");require("./BaseImageBox.vue.cjs2.js");const c=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),x={name:"BaseImageBox",components:{BaseBox:m.default,BaseIcon:g.default,BaseCheckmark:()=>Promise.resolve().then(()=>require("../BaseCheckmark/BaseCheckmark.vue.cjs.js")).then(t=>t.default||t),BaseImage:()=>Promise.resolve().then(()=>require("../BaseImage/BaseImage.vue.cjs.js")).then(t=>t.default||t),BaseImageGrid:()=>Promise.resolve().then(()=>require("../BaseImageGrid/BaseImageGrid.vue.cjs.js")).then(t=>t.default||t)},directives:{insertTextAsHtml:b.default},props:{title:{type:String,default:"No title"},altTitle:{type:String,default:""},subtext:{type:String,default:""},altSubtext:{type:String,default:""},showTitle:{type:Boolean,default:!0},showTitleOnHover:{type:Boolean,default:!1},titleRows:{type:[String,Number],default:"auto",validator:t=>["auto",1].includes(t)},imageUrl:{type:[String,Object],default:null},images:{type:Array,default:()=>[]},imageShadow:{type:Boolean,default:!0},imageFooterMargin:{type:String,default:"large",validator:t=>["large","small"].includes(t)},description:{type:String,default:null},additional:{type:String,default:null},icon:{type:String,default:""},iconSize:{type:String,default:"xxlarge",validator:t=>["small","medium","large","xlarge","xxlarge"].includes(t)},playIcon:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},boxSize:{type:Object,default:()=>({width:"auto",height:"auto"})},boxText:{type:Array,default:()=>[]},lazyload:{type:Boolean,default:!1},imageFirst:{type:Boolean,default:!1},centerHeader:{type:Boolean,default:!1},renderElementAs:{type:String,default:"div"},linkTo:{type:[String,Object],default:"",validator:t=>typeof t=="string"||t instanceof Object&&Object.keys(t).includes("path")},interpretTextAsHtml:{type:Boolean,default:!1}},data(){return{selectedInt:!1,boxTextStyle:{},displayImage:!0,resizeTimeout:null}},computed:{altTitleInt(){return this.altTitle||this.title},altSubtextInt(){return this.altSubtext||this.subtext},imageShadowTop(){return this.selectable&&this.hasImages&&!this.showTitle||this.selectable&&this.hasImages&&this.imageFirst},imageShadowBottom(){return this.imageShadow&&!this.icon&&(!this.showTitleOnHover||this.showTitleOnHover&&this.additional)},hasImages(){return!!(this.imageUrl||this.images&&this.images.length)}},watch:{selectedInt(t){t!==this.selected&&this.$emit("select-triggered",t)},selected(t){this.selectedInt!==t&&(this.selectedInt=t)},boxText(){this.calcTextHeight()}},mounted(){this.selectedInt=this.selected,window&&window.addEventListener("resize",this.resizeTriggered),this.$nextTick(()=>{this.calcTextHeight()})},destroyed(){window.removeEventListener("resize",this.resizeTriggered)},methods:{boxSelect(){this.selectable?this.selectedInt=!this.selectedInt:this.$emit("clicked")},resizeTriggered(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.calcTextHeight()},500)},calcTextHeight(){if(!this.imageUrl&&this.boxText.length&&this.$refs.baseBox&&this.$refs.boxText){let t=0;if(this.$refs.headerBox){const r=this.$refs.headerBox,_=r.clientHeight,d=r.offsetTop;t=_+2*d}const e=this.$refs.boxText,a=this.$refs.boxTextInner[0]||this.$refs.boxTextInner,s=this.$refs.baseBox.$el.clientHeight,i=window.getComputedStyle(a,null).getPropertyValue("line-height").replace("px",""),n=window.getComputedStyle(e,null).getPropertyValue("margin-bottom").replace("px","");let o=s-t-n;this.description&&(o-=i);const l=Math.floor(o/i);this.boxTextStyle={height:`${i*l}px`,"-webkit-line-clamp":l}}},src(t){return typeof t=="string"?t:Object.entries(t).slice(-1)[0][1]},srcset(t){return typeof t=="object"?[t]:[]}}};var h=function(){var e=this,a=e._self._c;return a("BaseBox",{ref:"baseBox",attrs:{"box-size":e.boxSize,"render-element-as":e.renderElementAs,"additional-attributes":e.linkTo?{to:e.linkTo}:{},"box-ratio":"100"},on:{clicked:e.boxSelect}},[a("div",{class:["base-image-box",{"base-image-box--hover":(e.playIcon||e.showTitleOnHover)&&!e.selectable},{"base-image-box--hover-show-title":e.showTitleOnHover&&!e.selectable},{"base-image-box--selectable":e.selectable},{"base-image-box--draggable":e.draggable},{"base-image-box--selected":e.selectable&&e.selectedInt}]},[e.showTitle?a("div",{ref:"headerBox",class:["base-image-box__header",{"base-image-box__header--bottom":e.imageFirst},{"base-image-box__header--center-text":e.centerHeader},{"base-image-box__header--separator-top":!e.hasImages&&!e.imageShadow&&e.imageFirst},{"base-image-box__header--separator-bottom":!e.hasImages&&!e.imageShadow&&!e.imageFirst}]},[a("div",{staticClass:"base-image-box__header__row"},[a("div",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:e.title,interpretTextAsHtml:e.interpretTextAsHtml},expression:"{ value: title, interpretTextAsHtml }"}],class:["base-image-box__header__text","base-image-box__header__text--bold",{"base-image-box__header__text--2-lines":!e.subtext&&e.titleRows==="auto"}],attrs:{title:e.altTitleInt}}),e.$slots["title-right"]?a("div",{staticClass:"base-image-box__header__row__additional"},[e._t("title-right")],2):e._e()]),e.subtext?a("div",{staticClass:"base-image-box__header__row"},[a("div",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:e.subtext,interpretTextAsHtml:e.interpretTextAsHtml},expression:"{ value: subtext, interpretTextAsHtml }"}],staticClass:"base-image-box__header__text",attrs:{title:e.altSubtextInt}})]):e._e()]):e._e(),a("div",{class:["base-image-box__body",{"base-image-box__body__shadow--top":e.imageShadowTop},{"base-image-box__body__shadow--bottom":e.imageShadowBottom},{"base-image-box__body__shadow--height-1-3":e.imageShadow&&e.imageFirst},{"base-image-box__body__shadow--height-1-2":e.imageShadow&&!e.imageFirst}]},[(e.imageUrl||e.images.length)&&e.displayImage?[e.imageUrl||e.images&&e.images.length===1?a("BaseImage",{ref:"image",class:["base-image-box__body__image"],attrs:{alt:e.altTitleInt,lazyload:e.lazyload,src:e.images&&e.images.length===1?e.src(e.images[0]):e.src(e.imageUrl),srcset:e.images&&e.images.length===1?e.srcset(e.images[0]):e.srcset(e.imageUrl)},on:{error:function(s){e.displayImage=!1}}}):e._e(),e.images&&e.images.length>1?a("BaseImageGrid",{attrs:{alt:e.altTitleInt,images:e.images,lazyload:e.lazyload}}):e._e()]:e._e(),e.icon||e.$slots.icon?a("div",{class:["base-image-box__body__icon","base-image-box__icon","base-image-box__icon--"+e.iconSize]},[e._t("icon",function(){return[a("BaseIcon",{class:["base-image-box__icon","base-image-box__icon--"+e.iconSize],attrs:{name:e.icon}})]},{icon:e.icon})],2):e._e(),e.playIcon?a("BaseIcon",{class:["base-image-box__body__icon","base-image-box__icon","base-image-box__icon--play","base-image-box__icon--"+e.iconSize],attrs:{name:"play"}}):e._e(),!e.hasImages||!e.displayImage?a("div",{ref:"boxText",staticClass:"base-image-box__body__text"},[e._t("text",function(){return[a("div",{ref:"boxTextInner",staticClass:"base-image-box__body__text__inner",style:e.boxTextStyle},e._l(e.boxText,function(s,i){return a("div",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{value:s,interpretTextAsHtml:e.interpretTextAsHtml},expression:"{ value: entry, interpretTextAsHtml }"}],key:i})}),0)]},{text:e.boxText})],2):e._e(),a("div",{class:["base-image-box__body__footer","base-image-box__body__footer--position-margin-"+e.imageFooterMargin,{"base-image-box__body__footer--invert":e.icon}]},[e.$slots["footer-left"]?a("div",{staticClass:"base-image-box__body__footer__left"},[e._t("footer-left")],2):e._e(),a("div",{staticClass:"base-image-box__body__footer__center"},[e.showTitleOnHover?a("div",{directives:[{name:"insert-text-as-html",rawName:"v-insert-text-as-html",value:{interpretTextAsHtml:e.interpretTextAsHtml,value:e.title},expression:"{ interpretTextAsHtml, value: title }"}],staticClass:"base-image-box__body__footer__title base-image-box__body__footer--bold",attrs:{title:e.altTitleInt}}):e._e(),e.description?a("div",{class:["base-image-box__body__footer__text",{"base-image-box__body__footer__text--bold":!e.additional}],attrs:{title:e.description}},[e._v(" "+e._s(e.description)+" ")]):e._e(),e.additional?a("div",{class:["base-image-box__body__footer__text","base-image-box__body__footer__text--bold"],attrs:{title:e.additional}},[e._v(" "+e._s(e.additional)+" ")]):e._e()]),e.$slots["footer-right"]||e.playIcon?a("div",{staticClass:"base-image-box__body__footer__right"},[e.playIcon?a("BaseIcon",{class:["base-image-box__icon","base-image-box__icon--small","base-image-box__icon--play"],attrs:{name:"play"}}):e._e(),e._t("footer-right")],2):e._e()])],2),a("div",{staticClass:"base-image-box__features"},[a("transition",{attrs:{name:"slide-fade"}},[e.selectable?a("BaseCheckmark",{staticClass:"base-image-box__checkbox",attrs:{checked:e.selectedInt,label:e.altTitleInt,"mark-style":"checkbox","check-box-size":"large"},on:{clicked:e.boxSelect}}):e._e()],1)],1)])])},u=[],f=c.default(x,h,u,!1,null,"da1aaa42",null,null);const p=f.exports;exports.default=p;
//# sourceMappingURL=BaseImageBox.vue.cjs.js.map
