"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const h=require("../../utils/utils.cjs.js"),u=require("../../mixins/i18n.cjs.js");require("./BaseDropDownList.vue.cjs2.js");const f=require("../../_virtual/_plugin-vue2_normalizer.cjs.js"),g={name:"BaseDropDownList",mixins:[u.default],props:{dropDownOptions:{type:Array,default:()=>[]},identifierPropertyName:{type:String,default:"id"},labelPropertyName:{type:String,default:"value"},activeOption:{type:[Object,String],default:()=>({})},selectedOption:{type:[Object,String],default:()=>({})},listId:{type:String,default:""},listBodyStyle:{type:Object,default:()=>({})},activeStyled:{type:Boolean,default:!0},selectStyled:{type:Boolean,default:!1},displayAsDropDown:{type:Boolean,default:!0},dropDownNoOptionsInfo:{type:String,default:""},language:{type:String,default:""},hasSubOptions:{type:Boolean,default:!1},useCustomOptionActiveBackgroundColor:{type:Boolean,default:!1},useHighlightStringMatch:{type:Boolean,default:!1},highlightStringMatch:{type:String,default:""},highlightStringTags:{type:Array,default:()=>[]}},data(){return{inputElement:null}},computed:{valueIsString(){return this.dropDownOptions&&this.dropDownOptions.length&&typeof this.getLangLabel(this.dropDownOptions[0][this.labelPropertyName],!0)=="string"},activeOptionIndex(){return this.hasSubOptions&&(!this.activeOption||this.activeOption[this.identifierPropertyName]!==void 0)?this.dropDownOptions.findIndex(e=>e[this.identifierPropertyName]===this.activeOption[this.identifierPropertyName]):this.dropDownOptions.indexOf(this.activeOption)},noOptionsSlotHasData(){return!!this.$slots["no-options"]},highlightTags(){var e;return(e=this.highlightStringTags)!=null&&e.length?{highlightTags:this.highlightStringTags}:{}}},mounted(){const e=document.getElementsByTagName("input");if(e&&e.length){const t=Array.from(e);this.inputElement=t.find(o=>o.getAttribute("list")===this.listId),this.inputElement&&this.inputElement.addEventListener("keydown",this.navigateOptions)}},destroyed(){this.inputElement&&this.inputElement.removeEventListener("keydown",this.navigateOptions)},methods:{highlight(e){return h.highlightText({word:e,queryString:this.highlightStringMatch,...this.highlightTags})},selected(e){this.$emit("update:selected-option",e)},optionHasData(e){return typeof e=="string"?!!e:e&&e.length?!!e.length:!!(e&&Object.keys(e).length)},navigateOptions(e,{activeOptionHeight:t=0,activeOptionTop:o=0}={}){const{key:n}=e;if(["ArrowDown","ArrowUp"].includes(n)&&(!this.hasSubOptions||t)&&this.$refs.option&&this.$refs.option[this.activeOptionIndex]){const l=this.$refs.option[this.activeOptionIndex],i=t||l.clientHeight,r=l.offsetTop+o;if(this.$parent.$refs.dropDownContainer)this.$parent.navigateOptions(e,{activeOptionHeight:i,activeOptionTop:r});else{let s=this.$refs.dropDownContainer;const p=this.$refs.dropDownList;p.scrollHeight>p.clientHeight&&(s=p);const a=s.scrollTop,d=s.clientHeight,c=r+i<a||r>a+d;!this.hasSubOptions&&!this.activeOptionIndex?s.scrollTo({top:0}):!this.hasSubOptions&&this.activeOptionIndex===this.dropDownOptions.length-1?s.scrollTo({top:r+i}):e.key==="ArrowDown"?c?s.scrollTo({top:r}):r+i>d+a&&s.scrollTo({top:a+i}):e.key==="ArrowUp"&&(c?s.scrollTo({top:r+i-d}):a>r&&s.scrollTo({top:a-i}))}}}}};var y=function(){var t=this,o=t._self._c;return o("div",{ref:"dropDownContainer",staticClass:"base-drop-down-list__container",class:["base-drop-down-list__container",{"base-drop-down-list__container-drop-down-style":t.displayAsDropDown}]},[t._t("before-list"),o("ul",{ref:"dropDownList",staticClass:"base-drop-down-list",style:t.listBodyStyle,attrs:{id:t.listId,"aria-activedescendant":t.activeOption?t.activeOption[t.identifierPropertyName]:!1,role:"listbox"}},[t._l(t.dropDownOptions,function(n,l){return[t.optionHasData(n[t.labelPropertyName])?o("li",{key:l,ref:"option",refInFor:!0,class:["base-drop-down-list__option",{"base-drop-down-list__option__hover":t.activeStyled},{"base-drop-down-list__option__selected":t.selectStyled&&n===t.selectedOption},{"base-drop-down-list__option__active":t.activeStyled&&l===t.activeOptionIndex},{"base-drop-down-list__option__active-custom":t.useCustomOptionActiveBackgroundColor&&l===t.activeOptionIndex}],attrs:{id:n[t.identifierPropertyName],value:t.valueIsString?t.getLangLabel(n[t.labelPropertyName],!0):n[t.identifierPropertyName],"aria-selected":t.selectStyled&&n[t.identifierPropertyName]===t.selectedOption,role:"option",tabindex:"0"},on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.selected(n)},click:function(i){return i.stopPropagation(),t.selected(n)},touchstart:function(i){i.stopPropagation()}}},[t._t("option",function(){return[t.useHighlightStringMatch?[o("span",{domProps:{innerHTML:t._s(t.highlight(t.getLangLabel(n[t.labelPropertyName],!0)))}})]:[t._v(" "+t._s(t.getLangLabel(n[t.labelPropertyName],!0))+" ")]]},{option:n})],2):t._e()]}),!t.dropDownOptions.length&&(t.noOptionsSlotHasData||t.dropDownNoOptionsInfo)?o("div",{class:["base-drop-down-list__option","base-drop-down-list__no-options"]},[t.dropDownOptions.length?t._e():t._t("no-options",function(){return[t._v(" "+t._s(t.dropDownNoOptionsInfo)+" ")]})],2):t._e()],2),t._t("after-list")],2)},_=[],O=f.default(g,y,_,!1,null,"99761913",null,null);const m=O.exports;exports.default=m;
//# sourceMappingURL=BaseDropDownList.vue.cjs.js.map
